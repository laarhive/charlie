<!-- public/debug/bus/index.html -->
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Charlie Bus Monitor</title>
    <style>
        body { font-family: system-ui, sans-serif; margin: 16px; }
        .row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
        .pill { padding: 4px 10px; border-radius: 999px; background: #eee; }
        button { padding: 6px 10px; }
        pre { background: #111; color: #ddd; padding: 12px; border-radius: 8px; overflow: auto; max-height: 70vh; }
        input, select { padding: 6px 8px; }
        fieldset { border: 1px solid #ddd; border-radius: 10px; padding: 10px 12px; }
        legend { padding: 0 6px; color: #444; }
        label { user-select: none; }
    </style>
</head>
<body>
<h1>Charlie Bus Monitor</h1>

<div class="row">
    <div class="pill" id="status">disconnected</div>

    <button id="connectBtn">Connect</button>
    <button id="clearBtn">Clear</button>
</div>

<div class="row" style="margin-top: 12px;">
    <fieldset>
        <legend>Buses</legend>
        <div class="row">
            <label><input type="checkbox" class="busCk" value="presence" /> presence</label>
            <label><input type="checkbox" class="busCk" value="vibration" /> vibration</label>
            <label><input type="checkbox" class="busCk" value="button" /> button</label>
            <label><input type="checkbox" class="busCk" value="main" /> main</label>
            <label><input type="checkbox" class="busCk" value="presenceInternal" /> presenceInternal</label>
        </div>
    </fieldset>

    <fieldset>
        <legend>Filters</legend>
        <div class="row">
            <label>
                Time:
                <select id="timeWindow">
                    <option value="0">all</option>
                    <option value="10">last 10s</option>
                    <option value="30">last 30s</option>
                    <option value="60" selected>last 60s</option>
                    <option value="300">last 5m</option>
                    <option value="900">last 15m</option>
                </select>
            </label>

            <label>
                Text:
                <input id="textFilter" type="text" placeholder="match in event.type/source/payload (stringified)" />
            </label>

            <label>
                Max lines:
                <select id="maxLines">
                    <option value="200">200</option>
                    <option value="500" selected>500</option>
                    <option value="1000">1000</option>
                    <option value="2000">2000</option>
                </select>
            </label>
        </div>
    </fieldset>
</div>

<pre id="log"></pre>

<script src="bus.js"></script>
</body>
</html>
